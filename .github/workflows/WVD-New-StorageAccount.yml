name: WVD - New Storage Account
on: workflow_dispatch

env:
  AZURE_HOSTPOOL_NAME: "hp-wvd-gha"              # WVD Hostpool name
  AZURE_NUMBER_OF_INSTANCES: 1                   # Number of instances to add to the WVD Hostpool
  SIG_IMAGE_DEF_NAME: win10-evd-20h2

jobs:
  build:
    name: ARM - Create Storage Account
    runs-on: windows-latest
    steps:
    # Authentication: log on to Azure with the AZURE_CREDENTIALS secret
    - name: Login via Az module
      uses: azure/login@v1
      with:
        creds: ${{secrets.AZURE_CREDENTIALS}}
        enable-AzPSSession: true 

# Azure PowerShell: Run inline script    
    - name: Run Azure PowerShell script (inline)
      uses: azure/powershell@v1
      with:
        inlineScript: |